<!DOCTYPE html>
<html>
<head>
    <title>TSTO Public Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --simpsons-yellow: #FED90F;
            --simpsons-blue: #3E67B1;
            --simpsons-red: #E53935;
            --simpsons-green: #7BC142;
            --simpsons-white: #ffffff;
            --simpsons-black: #333333;
            --simpsons-orange: #F57C00;
            --simpsons-panel: #FFF3D4;
            --simpsons-shadow: rgba(0, 0, 0, 0.3);
        }

        html {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Comic Neue', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: url('images/background.png') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            color: var(--simpsons-black);
            box-sizing: border-box;
        }
        
        /* Dark mode */
        body.dark-mode {
            --background: #1a1a2e;
            --panel-bg: #282838;
            --text-color: var(--simpsons-yellow);
            --text-primary: var(--simpsons-yellow);
            --text-secondary: var(--simpsons-orange);
            --border-color: var(--simpsons-blue);
            --hover-bg: #2d2d44;
            --input-bg: #1f1f2f;
            --editor-bg: #1E1E2E;
            background-color: var(--background);
            color: var(--text-color);
        }
        
        body.dark-mode .panel {
            background-color: var(--panel-bg);
            border-color: var(--text-color);
        }
        
        body.dark-mode h2 {
            color: var(--text-color);
            border-bottom-color: var(--text-color);
        }
        
        body.dark-mode .form-group label {
            color: var(--text-color);
        }
        
        body.dark-mode input[type="text"],
        body.dark-mode input[type="email"],
        body.dark-mode input[type="password"],
        body.dark-mode select {
            background-color: var(--input-bg);
            color: var(--text-color);
            border-color: var(--border-color);
        }
        
        body.dark-mode .theme-toggle {
            background-color: #333;
            color: var(--simpsons-yellow);
            border-color: var(--simpsons-yellow);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .panel {
            background-color: var(--simpsons-panel);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 6px 10px var(--simpsons-shadow);
            border: 4px solid var(--simpsons-yellow);
            margin-bottom: 20px;
        }

        h1 {
            text-align: center;
            color: var(--simpsons-yellow);
            margin-bottom: 30px;
            font-size: 48px;
            font-weight: bold;
            text-shadow: 2px 2px 0 var(--simpsons-black), 
                        -2px -2px 0 var(--simpsons-black),
                        2px -2px 0 var(--simpsons-black),
                        -2px 2px 0 var(--simpsons-black),
                        0 2px 0 var(--simpsons-black),
                        2px 0 0 var(--simpsons-black),
                        0 -2px 0 var(--simpsons-black),
                        -2px 0 0 var(--simpsons-black);
            letter-spacing: 1px;
        }

        h2 {
            color: var(--simpsons-blue);
            border-bottom: 2px solid var(--simpsons-blue);
            padding-bottom: 10px;
            margin-top: 0;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--simpsons-blue);
        }

        input[type="text"],
        input[type="email"],
        input[type="password"],
        select {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: 2px solid var(--simpsons-blue);
            font-family: 'Comic Neue', sans-serif;
            font-size: 16px;
        }

        button {
            background-color: var(--simpsons-blue);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-family: 'Comic Neue', sans-serif;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 0 #2A4B85;
            position: relative;
            top: 0;
        }

        button:hover {
            background-color: #5482D0;
            top: -2px;
            box-shadow: 0 6px 0 #2A4B85;
        }

        button:active {
            top: 4px;
            box-shadow: 0 0 0 #2A4B85;
        }

        .response {
            margin-top: 15px;
            padding: 10px;
            border-radius: 10px;
            display: none;
        }

        .success {
            background-color: var(--simpsons-green);
            color: white;
        }

        .error {
            background-color: var(--simpsons-red);
            color: white;
        }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--simpsons-yellow);
            color: var(--simpsons-black);
            border: 2px solid var(--simpsons-black);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }
        
        /* Delete confirmation styling */
        .delete-confirmation-input {
            width: 100%;
            padding: 15px 15px 15px 15px;
            border-radius: 10px;
            border: 2px solid var(--simpsons-red);
            font-family: 'Comic Neue', sans-serif;
            font-size: 18px;
            text-align: center;
            margin: 15px 0 15px 0;
            background-color: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            box-sizing: border-box;
        }
        
        .delete-confirmation-input:focus {
            border-color: var(--simpsons-red);
            box-shadow: 0 0 8px rgba(229, 57, 53, 0.5);
            outline: none;
        }
        
        body.dark-mode .delete-confirmation-input {
            background-color: var(--input-bg);
            color: var(--text-color);
            border-color: var(--simpsons-red);
        }

        .donut {
            position: fixed;
            width: 100px;
            height: 100px;
            z-index: -1;
        }

        .donut1 {
            top: 10%;
            left: 5%;
            animation: float 8s ease-in-out infinite;
        }

        .donut2 {
            top: 20%;
            right: 5%;
            animation: float 10s ease-in-out infinite;
            animation-delay: 1s;
        }

        .donut3 {
            bottom: 10%;
            left: 10%;
            animation: float 9s ease-in-out infinite;
            animation-delay: 2s;
        }

        .donut4 {
            bottom: 15%;
            right: 10%;
            animation: float 11s ease-in-out infinite;
            animation-delay: 3s;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        .user-info {
            text-align: right;
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--simpsons-blue);
        }

        .edit-name-button {
            background: none;
            border: none;
            color: var(--simpsons-blue);
            cursor: pointer;
            padding: 0 5px;
            font-size: 14px;
            box-shadow: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }

        .edit-name-button:hover {
            transform: scale(1.2);
            box-shadow: none;
        }

        .edit-name-button:active {
            transform: scale(0.9);
            box-shadow: none;
        }

        body.dark-mode .edit-name-button {
            color: var(--simpsons-yellow);
        }

        .logout-button {
            background-color: var(--simpsons-red);
            box-shadow: 0 4px 0 #B71C1C;
            margin-left: 10px;
            padding: 8px 15px;
            font-size: 14px;
        }

        .logout-button:hover {
            background-color: #F44336;
            box-shadow: 0 6px 0 #B71C1C;
        }

        .town-card {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            border-left: 5px solid var(--simpsons-blue);
        }

        .town-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .town-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--simpsons-blue);
            margin: 0;
        }

        .town-size {
            font-size: 14px;
            color: #666;
        }

        .town-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-button {
            flex: 1;
            text-align: center;
            padding: 8px 0;
        }

        .import-button {
            background-color: var(--simpsons-green);
            box-shadow: 0 4px 0 #388E3C;
        }

        .import-button:hover {
            background-color: #66BB6A;
            box-shadow: 0 6px 0 #388E3C;
        }

        .export-button {
            background-color: var(--simpsons-blue);
            box-shadow: 0 4px 0 #1A237E;
        }

        .export-button:hover {
            background-color: #5C6BC0;
            box-shadow: 0 6px 0 #1A237E;
        }

        .delete-button {
            background-color: var(--simpsons-red);
            box-shadow: 0 4px 0 #B71C1C;
        }

        .delete-button:hover {
            background-color: #EF5350;
            box-shadow: 0 6px 0 #B71C1C;
        }

        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }

        .modal-content {
            background-color: var(--simpsons-panel);
            margin: 15% auto;
            padding: 30px 30px 30px 30px;
            border: 4px solid var(--simpsons-yellow);
            border-radius: 15px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 6px 10px var(--simpsons-shadow);
            box-sizing: border-box;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            margin: 0;
            color: var(--simpsons-blue);
        }

        .close-button {
            color: var(--simpsons-black);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .modal-body {
            margin: 30px 0;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .no-town {
            text-align: center;
            padding: 30px;
            color: #666;
        }

        .no-town i {
            font-size: 48px;
            color: var(--simpsons-blue);
            margin-bottom: 15px;
        }
        
        /* Currency styles */
        .currency-card, .display-name-info {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
        }
        
        body.dark-mode .display-name-info {
            background-color: var(--dark-card-bg);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .display-name-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        body.dark-mode .display-name-description {
            color: #aaa;
        }
        
        #current-display-name {
            font-weight: bold;
            color: var(--simpsons-blue);
        }
        
        #display-name-field {
            padding: 10px;
            border: 2px solid var(--simpsons-blue);
            border-radius: 5px;
            font-size: 16px;
            width: 250px;
            margin-right: 10px;
            background-color: white;
        }
        
        body.dark-mode #display-name-field {
            background-color: var(--input-bg);
            color: var(--text-color);
            border-color: var(--simpsons-blue);
        }
        
        #save-name-button {
            background-color: var(--simpsons-blue);
            box-shadow: 0 4px 0 #1A237E;
            padding: 10px 15px;
            font-size: 14px;
        }
        
        #save-name-button:hover {
            background-color: #5C7CFA;
            box-shadow: 0 6px 0 #1A237E;
        }
        
        .currency-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--simpsons-yellow);
            padding-bottom: 10px;
        }
        
        .currency-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--simpsons-blue);
            margin: 0;
        }
        
        .currency-details {
            margin-bottom: 15px;
        }
        
        .currency-details p {
            margin: 8px 0;
            font-size: 16px;
        }
        
        /* Admin banner styles */
        .admin-banner {
            margin-bottom: 20px;
        }
        
        .admin-view-notice {
            background-color: var(--simpsons-red);
            color: white;
            padding: 10px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 10px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-view-notice button {
            background-color: white;
            color: var(--simpsons-red);
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Comic Neue', cursive;
        }
        
        .admin-view-notice button:hover {
            background-color: var(--simpsons-yellow);
        }
        
        /* Admin actions styles */
        .admin-actions {
            background-color: var(--simpsons-panel);
            border: 3px solid var(--simpsons-blue);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .admin-actions h3 {
            color: var(--simpsons-blue);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 20px;
            text-align: center;
        }
        
        .admin-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .admin-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-family: 'Comic Neue', cursive;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.2s ease;
            box-shadow: 0 3px 0 rgba(0,0,0,0.2);
            position: relative;
            top: 0;
        }
        
        .admin-btn:hover {
            top: -2px;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2);
        }
        
        .admin-btn:active {
            top: 3px;
            box-shadow: 0 0 0 rgba(0,0,0,0.2);
        }
        
        .admin-btn.import-btn {
            background-color: var(--simpsons-green);
        }
        
        .admin-btn.export-btn {
            background-color: var(--simpsons-blue);
        }
        
        .admin-btn.delete-btn {
            background-color: var(--simpsons-red);
        }
        
        .admin-btn.currency-btn {
            background-color: var(--simpsons-orange);
        }
        
        /* Dark mode styles for admin actions */
        body.dark-mode .admin-actions {
            background-color: var(--panel-bg);
            border-color: var(--simpsons-blue);
        }
        
        body.dark-mode .admin-actions h3 {
            color: var(--text-color);
        }
        
        .currency-details strong {
            color: var(--simpsons-blue);
            font-size: 18px;
        }
        
        .currency-actions {
            display: flex;
            gap: 10px;
        }
        
        .edit-button {
            background-color: var(--simpsons-blue);
            box-shadow: 0 4px 0 #2A4A8F;
        }
        
        .no-currency {
            text-align: center;
            padding: 30px;
            color: #666;
        }
        
        .no-currency i {
            font-size: 48px;
            color: var(--simpsons-yellow);
            margin-bottom: 15px;
        }
        
        .create-button {
            background-color: var(--simpsons-green);
            box-shadow: 0 4px 0 #388E3C;
            margin-top: 15px;
            display: inline-block;
        }
        
        /* Decorative donuts */
        .donut {
            position: fixed;
            width: 80px;
            height: 80px;
            z-index: -1;
            pointer-events: none;
        }
        
        .donut1 {
            top: 10%;
            left: 5%;
            animation: float 8s ease-in-out infinite;
        }
        
        .donut2 {
            top: 20%;
            right: 5%;
            animation: float 10s ease-in-out infinite;
            animation-delay: 1s;
        }
        
        .donut3 {
            bottom: 15%;
            left: 10%;
            animation: float 9s ease-in-out infinite;
            animation-delay: 2s;
        }
        
        .donut4 {
            bottom: 25%;
            right: 8%;
            animation: float 11s ease-in-out infinite;
            animation-delay: 3s;
        }
        
        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(10deg);
            }
            100% {
                transform: translateY(0) rotate(0deg);
            }
        }
    </style>
</head>
<body>
    <div class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon"></i>
    </div>

    <!-- Decorative Donuts -->
    <svg class="donut donut1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="40" fill="#F57C00" />
        <circle cx="50" cy="50" r="15" fill="#FFF3D4" />
        <circle cx="50" cy="50" r="45" fill="none" stroke="#FED90F" stroke-width="3" />
        <circle cx="30" cy="35" r="5" fill="#E53935" />
        <circle cx="65" cy="30" r="5" fill="#7BC142" />
        <circle cx="70" cy="60" r="5" fill="#3E67B1" />
    </svg>
    
    <svg class="donut donut2" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="40" fill="#E53935" />
        <circle cx="50" cy="50" r="15" fill="#FFF3D4" />
        <circle cx="50" cy="50" r="45" fill="none" stroke="#FED90F" stroke-width="3" />
        <circle cx="30" cy="35" r="5" fill="#7BC142" />
        <circle cx="65" cy="30" r="5" fill="#F57C00" />
        <circle cx="70" cy="60" r="5" fill="#3E67B1" />
    </svg>
    
    <svg class="donut donut3" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="40" fill="#7BC142" />
        <circle cx="50" cy="50" r="15" fill="#FFF3D4" />
        <circle cx="50" cy="50" r="45" fill="none" stroke="#FED90F" stroke-width="3" />
        <circle cx="30" cy="35" r="5" fill="#E53935" />
        <circle cx="65" cy="30" r="5" fill="#F57C00" />
        <circle cx="70" cy="60" r="5" fill="#3E67B1" />
    </svg>
    
    <svg class="donut donut4" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="40" fill="#3E67B1" />
        <circle cx="50" cy="50" r="15" fill="#FFF3D4" />
        <circle cx="50" cy="50" r="45" fill="none" stroke="#FED90F" stroke-width="3" />
        <circle cx="30" cy="35" r="5" fill="#E53935" />
        <circle cx="65" cy="30" r="5" fill="#F57C00" />
        <circle cx="70" cy="60" r="5" fill="#7BC142" />
    </svg>
    
    <div class="container">
        <h1>TSTO Dashboard</h1>
        
        <div class="user-info">
            Welcome, <span id="user-display-name">User</span>
            <span class="username-source">(In-Game Name)</span>
            <button class="edit-name-button" onclick="openDisplayNameModal()" title="Edit Display Name">
                <i class="fas fa-edit"></i>
            </button>!
            <button class="logout-button" onclick="handleLogout()">Logout</button>
        </div>
        
        <!-- Global Disclaimer -->
        <div class="disclaimer" style="background-color: #FFF3D4; border: 2px solid #E53935; border-radius: 8px; padding: 10px; margin-bottom: 20px;">
            <p style="margin: 0; color: #333; font-weight: bold;"><i class="fas fa-exclamation-triangle" style="color: #E53935;"></i> Important:</p>
            <p style="margin: 5px 0 0 0; color: #333;">Please make sure the game is completely closed before modifying any files. Changes will take effect the next time you start the game. Modifying files while the game is running may cause data corruption or loss.</p>
        </div>
        
        <div class="panel">
            <h2>Your Town</h2>
            <div id="town-container">
                <!-- Town info will be loaded here -->
                <div class="loading-indicator">
                    <i class="fas fa-spinner fa-spin"></i> Loading your town...
                </div>
            </div>
            
            <div id="response" class="response"></div>
        </div>
		
		        <!-- Currency Panel -->
        <div class="panel">
            <h2>Edit Currency</h2>
            <div id="currency-container">
                <!-- Currency info will be loaded here -->
                <div class="loading-indicator">
                    <i class="fas fa-spinner fa-spin"></i> Loading your currency...
                </div>
            </div>
            <div id="currency-response" class="response"></div>
        </div>
        
        <!-- Display Name Panel -->
        <div class="panel">
            <h2>Edit In Game Username</h2>
            <div id="display-name-container">
                <div class="display-name-info">
                    <p>Your current username: <span id="current-display-name">Loading...</span></p>
                    <p class="display-name-description">This name will be shown in-game..</p>
                    <div class="form-group">
                        <input type="text" id="display-name-field" placeholder="Enter new display name" maxlength="50">
                        <button id="save-name-button" class="action-button" onclick="updateDisplayName()">
                            <i class="fas fa-save"></i> Save Name
                        </button>
                    </div>
                </div>
            </div>
            <div id="display-name-response" class="response"></div>
        </div>
            </div>


    
    <!-- Import Town Modal -->
    <div id="import-modal" class="modal">
        <div class="modal-content">
            <div class="town-header">
                <h3 class="town-title" id="import-town-title">Your Springfield</h3>
                <span class="town-size" id="import-town-size"></span>
            </div>
            <div class="town-details">
                <p>Last modified: <span id="import-last-modified"></span></p>
                <p>Town size: <strong id="import-town-size-detail"></strong></p>
            </div>
            <div class="modal-body">
                <div class="alert-box" style="background-color: #FFF3D4; border: 2px solid #FED90F; border-radius: 8px; padding: 10px; margin-bottom: 15px;">
                    <p style="margin: 0; color: #333; font-weight: bold;"><i class="fas fa-exclamation-triangle" style="color: #F57C00;"></i> Important:</p>
                    <p style="margin: 5px 0 0 0; color: #333;">Rename your town file (.pb) to your email address (e.g., youremail@example.com.pb)</p>
                    <p style="margin: 5px 0 0 0; color: #333;">Fill out the form with your email (same as the filename)</p>
                </div>
                <div class="file-input-wrapper">
                    <label for="town-file-input" class="file-input-label">
                        <i class="fas fa-file-upload"></i> Select Town File (.pb)
                        <input type="file" id="town-file-input" accept=".pb" />
                    </label>
                    <div id="selected-file" class="selected-file"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('import-modal')">Cancel</button>
                <button id="upload-button" class="import-button" onclick="uploadTownFile()">
                    <i class="fas fa-upload"></i> Upload
                </button>
            </div>
        </div>
    </div>
    
    <!-- Delete Town Modal -->
    <div id="delete-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Delete Town</h3>
                <span class="close-button" onclick="closeModal('delete-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <p><strong>Warning:</strong> You are about to delete your town. This action cannot be undone.</p>
                <p>To confirm deletion, please type <strong>DELETE</strong> in the field below:</p>
                <div class="form-group">
                    <input type="text" id="delete-confirmation" placeholder="Type DELETE here" autocomplete="off" class="delete-confirmation-input">
                </div>
                <div id="delete-error" class="response error" style="display: none;">Please type DELETE to confirm</div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('delete-modal')">Cancel</button>
                <button class="delete-button" onclick="validateDeleteConfirmation()">
                    <i class="fas fa-trash-alt"></i> Delete
                </button>
            </div>
        </div>
    </div>
    
    <!-- Edit Currency Modal -->
    <div id="currency-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit Currency</h3>
                <span class="close-button" onclick="closeModal('currency-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="alert-box" style="background-color: #FFF3D4; border: 2px solid #FED90F; border-radius: 8px; padding: 10px; margin-bottom: 15px;">
                    <p style="margin: 0; color: #333; font-weight: bold;"><i class="fas fa-exclamation-triangle" style="color: #F57C00;"></i> Note:</p>
                    <p style="margin: 5px 0 0 0; color: #333;">Maximum allowed donuts is 100,000. Higher values will be capped.</p>
                </div>
                <div class="form-group">
                    <label for="donuts-input">Donuts:</label>
                    <input type="number" id="donuts-input" min="0" max="100000">
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('currency-modal')">Cancel</button>
                <button id="save-currency-button" class="import-button" onclick="saveCurrency()">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>
    <!-- Edit Display Name Modal -->
    <div id="display-name-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit Display Name</h3>
                <span class="close-button" onclick="closeModal('display-name-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="display-name-input">Display Name:</label>
                    <input type="text" id="display-name-input" maxlength="50">
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('display-name-modal')">Cancel</button>
                <button id="save-display-name-button" class="import-button" onclick="saveDisplayName()">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>
    <!-- Admin Currency Modal -->
    <div id="admin-currency-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit User Currency</h3>
                <span class="close-button" onclick="closeModal('admin-currency-modal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="alert-box" style="background-color: #FFF3D4; border: 2px solid #FED90F; border-radius: 8px; padding: 10px; margin-bottom: 15px;">
                    <p style="margin: 0; color: #333; font-weight: bold;"><i class="fas fa-exclamation-triangle" style="color: #F57C00;"></i> Note:</p>
                    <p style="margin: 5px 0 0 0; color: #333;">Maximum allowed donuts is 100,000. Higher values will be capped.</p>
                </div>
                <div class="form-group">
                    <label for="admin-donuts-input">Donuts for <span id="admin-currency-user"></span>:</label>
                    <input type="number" id="admin-donuts-input" min="0" max="100000">
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeModal('admin-currency-modal')">Cancel</button>
                <button id="admin-save-currency-button" class="import-button" onclick="updateAdminCurrency()">
                    <i class="fas fa-save"></i> Save Changes
                </button>
            </div>
        </div>
    </div>
    
    <script src="js/public_dashboard.js"></script>
    <script src="js/admin_town_management.js"></script>
	<footer style="text-align: center; padding: 20px; margin-top: 30px; color: var(--text-primary); font-size: 14px; font-family: 'Comic Neue', cursive;">
     Server created and designed by BodNJenie&trade;
    </footer>
</body>
</html>
